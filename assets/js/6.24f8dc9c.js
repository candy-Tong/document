(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{168:function(t,e,a){"use strict";a.r(e);var n=a(0),r=Object(n.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p",[t._v("学分制系统会对请求过多的服务器进行封禁，利用前端进行学分制的请求，则可以减少业务服务器对学分制过多的请求，减少被封的几率")]),t._v(" "),a("p",[t._v("这一功能需要配合一个"),a("a",{attrs:{href:"https://git.code.tencent.com/stu-syllabus/socketProxy",target:"_blank",rel:"noopener noreferrer"}},[t._v("socketProxy后台"),a("OutboundLink")],1),t._v("才能使用")]),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("配置socketProxy后台的请求url")]),t._v(" "),t._m(2),t._m(3),t._v(" "),a("p",[t._v("框架封装了一个请求函数，能够判断是否使用前端代理请求，出现错误能够请求降级，改为直接请求")]),t._v(" "),t._m(4),a("p",[t._v("选项，详情参见"),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/wx.request.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("小程序请求"),a("OutboundLink")],1),t._v("和"),a("a",{attrs:{href:"https://www.npmjs.com/package/urllib",target:"_blank",rel:"noopener noreferrer"}},[t._v("urllib"),a("OutboundLink")],1)]),t._v(" "),t._m(5),t._v(" "),a("p",[t._v("注意：仅仅适配了小程序请求和urllib以上5个选项项，如果使用前端代理请求，请确保只能拥有以上5个选项。如果不使用，则可以使用urllib的所有选项")]),t._v(" "),a("p",[t._v("函数返回：")]),t._v(" "),t._m(6)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"前端代理请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前端代理请求","aria-hidden":"true"}},[this._v("#")]),this._v(" 前端代理请求")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("// config/config.default.js\nconfig.socketRequest = {\n\turl: 'http://localhost:7003/socket-proxy'\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"请求函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#请求函数","aria-hidden":"true"}},[this._v("#")]),this._v(" 请求函数")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @param options\n * @param options.url\n * @param options.data\n * @param options.header\n * @param options.method\n * @param options.dataType\n * @param options.needProxy\n * @returns {Promise<*>}\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",[a("thead",[a("tr",[a("th",[t._v("选项名")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("意义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("url")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("请求URl")])]),t._v(" "),a("tr",[a("td",[t._v("data")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Object")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("请求数据，GET请求加入到query，POST则在body")])]),t._v(" "),a("tr",[a("td",[t._v("header")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Object")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("请求头")])]),t._v(" "),a("tr",[a("td",[t._v("method")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("请求方法，大写，默认为POST")])]),t._v(" "),a("tr",[a("td",[t._v("dataType")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("返回数据的类型，默认为json")])]),t._v(" "),a("tr",[a("td",[t._v("needProxy")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Boolean")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("是否使用前端代理请求，默认为true")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",[a("thead",[a("tr",[a("th",[t._v("属性名")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("意义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("data")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Object")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("响应数据")])]),t._v(" "),a("tr",[a("td",[t._v("header")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Object")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("响应头部")])]),t._v(" "),a("tr",[a("td",[t._v("status")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("http状态码")])])])])}],!1,null,null,null);e.default=r.exports}}]);